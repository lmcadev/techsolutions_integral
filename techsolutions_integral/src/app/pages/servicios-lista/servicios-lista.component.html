<div class="min-vh-100 d-flex justify-content-center align-items-start" style="background-color: #0D47A1;">
  <div class="bg-light rounded-4 my-4 p-4 w-100 contenedor-sombra" style="max-width: 1400px;">
    <!-- Encabezado -->
    <app-header></app-header>

    <!-- Título y controles de filtrado -->
    <section class="mt-5">
      <div class="text-center mb-5">
        <h1 class="fw-bold mb-3">NUESTROS SERVICIOS</h1>
        <p class="text-muted">Descubre toda nuestra gama de servicios tecnológicos</p>
      </div>

      <!-- Controles de filtrado y ordenamiento -->
      <div class="row mb-4">
        <div class="col-md-4 mb-3">
          <label class="form-label fw-bold">Buscar servicios:</label>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Nombre o descripción..."
            [value]="filtroTexto"
            (input)="onFiltroTextoChange($event)">
        </div>
        <div class="col-md-3 mb-3">
          <label class="form-label fw-bold">Ordenar por:</label>
          <select class="form-select" [value]="ordenarPor" (change)="onOrdenamientoChange($event)">
            <option value="nombre">Nombre (A-Z)</option>
            <option value="precio">Precio (Menor a Mayor)</option>
            <option value="precio-desc">Precio (Mayor a Menor)</option>
          </select>
        </div>
        <div class="col-md-3 mb-3">
          <div class="form-check mt-4">
            <input 
              class="form-check-input" 
              type="checkbox" 
              id="soloDisponibles"
              [checked]="mostrarSoloDisponibles"
              (change)="onDisponibilidadChange($event)">
            <label class="form-check-label fw-bold" for="soloDisponibles">
              Solo disponibles
            </label>
          </div>
        </div>
        <div class="col-md-2 mb-3 text-end">
          <div class="mt-4">
            <span class="badge bg-primary fs-6">{{ serviciosFiltrados.length }} servicios</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Loading -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Cargando servicios...</span>
      </div>
      <p class="mt-3 text-muted">Cargando servicios...</p>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="alert alert-danger mt-4">
      <i class="bi bi-exclamation-triangle me-2"></i>
      {{ error }}
    </div>

    <!-- Grid de servicios -->
    <section *ngIf="!isLoading && !error" class="mb-5">
      <!-- Sin resultados -->
      <div *ngIf="serviciosFiltrados.length === 0" class="text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h3 class="mt-3">No se encontraron servicios</h3>
        <p class="text-muted">Intenta ajustar los filtros de búsqueda</p>
      </div>

      <!-- Lista de servicios -->
      <div class="row g-4" *ngIf="serviciosFiltrados.length > 0">
        <div class="col-12 col-md-6 col-lg-4" *ngFor="let servicio of serviciosFiltrados">
          <div class="card h-100 servicio-card" (click)="verDetalle(servicio)">
            <!-- Header de la tarjeta -->
            <div class="card-header bg-primary text-white position-relative">
              <div class="d-flex justify-content-between align-items-start">
                <div class="servicio-icono">
                  <i [class]="servicio.icono" class="display-4"></i>
                </div>
                <div class="text-end">
                  <span class="badge" [class]="servicio.stock ? 'bg-success' : 'bg-danger'">
                    {{ servicio.stock ? 'Disponible' : 'Agotado' }}
                  </span>
                  <div *ngIf="estaEnCarrito(servicio)" class="mt-1">
                    <span class="badge bg-warning text-dark">
                      En carrito ({{ getCantidadEnCarrito(servicio) }})
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cuerpo de la tarjeta -->
            <div class="card-body d-flex flex-column">
              <h5 class="card-title fw-bold">{{ servicio.nombre }}</h5>
              <p class="card-text text-muted flex-grow-1">{{ servicio.descripcion }}</p>
              
              <!-- Precio -->
              <div class="mt-auto">
                <div class="d-flex justify-content-between align-items-end">
                  <div>
                    <span class="h4 text-primary fw-bold">${{ servicio.precio }}</span>
                  </div>
                  <div>
                    <button 
                      class="btn btn-sm btn-outline-primary me-2"
                      (click)="verDetalle(servicio)">
                      <i class="bi bi-eye me-1"></i>Ver
                    </button>
                    <button 
                      class="btn btn-sm btn-primary"
                      [disabled]="!servicio.stock"
                      (click)="agregarAlCarrito(servicio, $event)">
                      <i class="bi bi-cart-plus me-1"></i>
                      {{ servicio.stock ? 'Agregar' : 'No disponible' }}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Información adicional -->
    <section *ngIf="!isLoading && !error && serviciosFiltrados.length > 0" class="mt-5 pt-5 border-top">
      <div class="row">
        <div class="col-md-4 text-center mb-4">
          <i class="bi bi-shield-check display-4 text-primary mb-3"></i>
          <h5>Calidad Garantizada</h5>
          <p class="text-muted">Todos nuestros servicios cumplen con los más altos estándares de calidad</p>
        </div>
        <div class="col-md-4 text-center mb-4">
          <i class="bi bi-clock display-4 text-primary mb-3"></i>
          <h5>Soporte 24/7</h5>
          <p class="text-muted">Atención al cliente disponible las 24 horas del día, los 7 días de la semana</p>
        </div>
        <div class="col-md-4 text-center mb-4">
          <i class="bi bi-award display-4 text-primary mb-3"></i>
          <h5>Experiencia</h5>
          <p class="text-muted">Más de 10 años de experiencia en el sector tecnológico</p>
        </div>
      </div>
    </section>

    <!-- Pie de página -->
    <app-footer></app-footer>
  </div>
</div>